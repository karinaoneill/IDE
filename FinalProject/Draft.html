<!DOCTYPE html>
<html>
  
  <head>
    
    <title>Movement in London</title>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="london_boroughs_proper.geojson"></script>
    <script type="text/javascript" src="tooltips.js"></script>
    
    <style>
    </style>
    
  </head>
  
  <body style="background-color: #58355E;">
    
     <div id="title" style="background-color: #EC0B43;">
      <h1 align="center"> Final Project: Movement in London </h1>
    </div>
    <script>
	      
	var color = d3.scale.category20()
        var width = 840,
            height = 696;
        var svg = d3.select( "body" )
          .append( "svg" )
          .attr( "width", width )
          .attr( "height", height );
        var sfpd_districts = svg.append( "g" );
        var albersProjection = d3.geo.albers()
          .scale( 250000 )
          .rotate( [0.127975,0] )
          .center( [0, 51.507357] )
          .translate( [width/2,height/2.5] );
        var geoPath = d3.geo.path()
            .projection( albersProjection );
        sfpd_districts.selectAll( "path" )
          .data( sfpd_districts_geojson.features )
          .enter()
          .append( "path" )
          .attr( "fill", "#7FFF00" )
          .attr( "d", geoPath );
        var crimes = svg.append( "g" );
        crimes.selectAll( "path" )
          .data( sf_crime_geojson.features )
          .enter()
          .append( "path" )
          .attr( "fill", function (d){console.log(color(d.properties.Category));
			      return color(d.properties.Category); })
	  .attr( "stroke", "#999" )
          //.attr("r", 0.1)
          .attr( "d", geoPath )
	  .on("mouseover", 
                    function(d) {
                      d3.select(this).attr("fill", "#999");
		  	d3.text(function(d) { return d.properties.Category; });
                    })
           .on("mouseout", 
                    function(d) {
                      d3.select(this).attr("fill",function (d){return color(d.properties.Category); });
                    })
	  .call(d3.helper.tooltip(function (d) {return "Date: <b>" + d.properties.Dates + "</b><br/>Category: " + d.properties.Category + "</b><br/>Resolution: " + d.properties.Resolution + "</b><br/>Description: " + d.properties.Descript;}));
	  
      </script>
    
  </body>
  
</html>
